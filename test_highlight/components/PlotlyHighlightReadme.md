# PlotlyHighlighting Component

## Overview

The `PlotlyHighlighting` component provides client-side highlighting for histogram bins using Vue.js and DOM manipulation. Unlike the Python-based `BinHighlighter`, this component performs all highlighting operations directly in the browser, resulting in improved performance but with some trade-offs.

## How It Works

1. **DOM-Based Highlighting**: 
   - The component finds SVG path elements in the Plotly graph that correspond to histogram bars
   - It applies CSS styling directly to these elements when the mouse hovers over them
   - No Python round-trips are required for the basic highlighting functionality

2. **Integration with BinManager**:
   - The component still relies on `BinManager` to create the underlying bin structure
   - It uses the bin definitions but handles the interaction layer separately

3. **Mouse Tracking**:
   - Uses browser events to track mouse position relative to bin elements
   - Uses `requestAnimationFrame` for efficient rendering during mouse movement
   - Debounces events to prevent performance issues

4. **Change Detection**:
   - Implements a MutationObserver to detect changes to the Plotly graph
   - Automatically reapplies highlighting when the graph is updated
   - Handles resize events and other DOM modifications

## Technical Implementation

The component works in these steps:

1. Find all histogram bar elements in the DOM using CSS selectors
2. Store their original styling for restoration later
3. Attach mouse event listeners to the plot container
4. When the mouse moves over a bin, apply highlight styling
5. When the mouse leaves a bin, restore original styling
6. Watch for DOM changes and reapply listeners when needed

## Limitations

1. **No Hover Events in Python**:
   - Unlike `BinHighlighter`, hover events are not sent back to Python
   - Only click events are propagated to Python callbacks

2. **DOM Structure Dependency**:
   - Relies on specific Plotly DOM structure which could change with Plotly updates
   - May break if Plotly's internal rendering changes significantly

3. **Limited Debugging**:
   - Debugging is more challenging since highlighting happens entirely in JavaScript
   - The `debug` and `show` options can help, but provide less information than Python-based approaches

4. **SVG Performance**:
   - For extremely large histograms (thousands of bins), the DOM manipulation approach may become slower
   - Each bin requires its own SVG element which can impact browser performance

5. **Limited Customization**:
   - Some advanced styling options available in the Python highlighting approach may not be accessible
   - Customization is limited to the properties exposed through the component API

## When to Use

The JavaScript-based highlighting is ideal for:

- Large datasets where Python round-trips might cause performance issues
- Simple highlighting requirements where hover events aren't needed in Python
- Interactive applications where responsiveness is critical
- Situations where other JavaScript components need to interact with the highlighting

Use the Python-based `BinHighlighter` instead when:
- You need hover events in Python callbacks
- You require more complex highlighting behavior
- You need more detailed debugging information
- You're extending the highlighting with custom Python logic

## Component Options

The component accepts several options to customize its behavior:

- `viewer_id`: ID of the viewer to highlight (required)
- `show`: Whether to show debugging controls (default: false)
- `highlight`: Whether highlighting is enabled (default: true)
- `debug`: Whether to show debug info if elements aren't found (default: false)
- `fillColor`: Color to fill highlighted bins (default: "rgba(0, 0, 0)")
- `fillOpacity`: Opacity of the fill (default: 0.5)
- `strokeColor`: Color of the outline (default: "rgba(255, 120, 255, 1)")
- `strokeOpacity`: Opacity of the outline (default: 1)
- `strokeWidth`: Width of the outline (default: 1)
- `opacity`: Overall opacity (default: 1)

**Generated by Copilot**
